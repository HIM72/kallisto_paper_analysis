
To produce the BAM to pseudoalignment comparison you need to generate pseudoalignments from a BAM file.

This is done via 
samtools view NA12716_7_rsem.bam | cut -f 1,3 > bam_sens.txt
sort -n bam_sens.txt > bam_sens_sorted.txt

To generate pseudoalignments from kallisto you need to insert the following into ProcessReads.h, line ~100

      // collect the target information
       int ec = tc.collect(v1, v2, !paired);
       if (ec != -1) {
         nummapped++;
+
+       for (auto tr : index.ecmap[ec]) {
+         std::cout << seq1->name.s << "\t" << index.target_names_[tr] << "\n";
+       }
       }


Kallisto is then run with quant and piped to an kal_sens.txt file
sort -n kal_sens.txt > kal_sens_sorted.txt

For simulated rsem data the read name contains the true isoform generated to get the numbers, 
run sens.py in interactive mode and call the function 
testboth('bam_sens_sorted.txt', 'kal_sens_sorted.txt')
, order is important


For real data where we don't know the ground truth run sens_real.py in interactive mode with same parameters.

